<!-- Div for the product description and carousel with project pictures. -->
<div>
  <div class="product-banner">
    <div style="width:40%;">
      <div style="display:flex; justify-content:center;margin-bottom:20px;">
        <%= image_tag "https://kitt.lewagon.com/placeholder/users/ssaunier", class: "avatar", style:"margin-right: 20px;" %>
        <h1><%= @project.name%></h1>
      </div>
      <p><%= @project.description%></p>
    </div>
    <div id="carousel-<%= @project.id%>" class="carousel slide" data-bs-ride="carousel" style="width:40%;">
      <div class="carousel-inner" style="border-radius:20px;">
        <div class="carousel-item active">
          <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2940&q=80" class="d-block w-100" alt="..." style="height:325px;border-radius:20px;">
        </div>
        <div class="carousel-item">
          <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80" class="d-block w-100" alt="..." style="height: 325px;border-radius:20px;">
        </div>
        <div class="carousel-item">
          <img src="https://images.unsplash.com/photo-1556761175-b413da4baf72?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80" class="d-block w-100" alt="..." style="height: 325px;border-radius:20px;">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carousel-<%= @project.id%>" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carousel-<%= @project.id%>" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>

  <div class="board" data-controller="sortable modal">
    <div class="kanban-block text-center">
      <strong>Next Meeting</strong>
      <div id="nextmeeting" data-sortable-target="nextmeeting" style="margin-top:20px">
        <% @tasks.each do |task|%>
          <% if task.status == "Next Meeting"%>
            <a id="link" data-bs-toggle="modal" data-bs-target="#task<%=task.id%>Modal"><%= render "projects/shared/task", task: task %></a>
            <%= render "projects/shared/task_modal", task: task %>
          <% end %>
        <% end %>
      </div>
      <button type="button" class="btn btn-secondary add-task" data-bs-toggle="modal" data-bs-target="#formModal" data-bs-whatever="@mdo"><i class="fa-solid fa-plus"></i></button>
    </div>
    <div class="kanban-block text-center" >
      <strong>Unassigned</strong>
      <div id="unassigned" data-sortable-target="unassigned" style="margin-top:20px">
        <% @tasks.each do |task|%>
          <% if task.status == "Unassigned"%>
            <a id="link" data-bs-toggle="modal" data-bs-target="#task<%=task.id%>Modal"><%= render "projects/shared/task", task: task %></a>
            <%= render "projects/shared/task_modal", task: task %>
          <% end %>
        <% end %>
      </div>
      <button type="button" class="btn btn-secondary add-task" data-bs-toggle="modal" data-bs-target="#formModal" data-bs-whatever="@mdo"><i class="fa-solid fa-plus"></i></button>
    </div>
    <div class="kanban-block text-center" >
      <strong>To-Do</strong>
      <div id="todo" data-sortable-target="todo" style="margin-top:20px" >
        <% @tasks.each do |task|%>
          <% if task.status == "To-Do"%>
            <a id="link" data-bs-toggle="modal" data-bs-target="#task<%=task.id%>Modal"><%= render "projects/shared/task", task: task %></a>
            <%= render "projects/shared/task_modal", task: task %>
          <% end %>
        <% end %>
      </div>
      <button type="button" class="btn btn-secondary add-task" data-bs-toggle="modal" data-bs-target="#formModal" data-bs-whatever="@mdo"><i class="fa-solid fa-plus"></i></button>
    </div>
    <div class="kanban-block text-center" >
      <strong>In Progress</strong>
      <div id="inprogress" data-sortable-target="inprogress" style="margin-top:20px">
        <% @tasks.each do |task|%>
          <% if task.status == "In progress"%>
            <a id="link" data-bs-toggle="modal" data-bs-target="#task<%=task.id%>Modal"><%= render "projects/shared/task", task: task %></a>
            <%= render "projects/shared/task_modal", task: task %>
          <% end %>
        <% end %>
      </div>
      <button type="button" class="btn btn-secondary add-task" data-bs-toggle="modal" data-bs-target="#formModal" data-bs-whatever="@mdo"><i class="fa-solid fa-plus"></i></button>
    </div>
    <div class="kanban-block text-center" >
      <strong>Completed</strong>
      <div id="completed" data-sortable-target="completed" style="margin-top:20px">
        <% @tasks.each do |task|%>
          <% if task.status == "Completed"%>
            <a id="link" data-bs-toggle="modal" data-bs-target="#task<%=task.id%>Modal"><%= render "projects/shared/task", task: task %></a>
            <%= render "projects/shared/task_modal", task: task %>
          <% end %>
        <% end %>
      </div>
      <button type="button" class="btn btn-secondary add-task" data-bs-toggle="modal" data-bs-target="#formModal"><i class="fa-solid fa-plus"></i></button>
    </div>
  </div>
  <div class="create-ticket" style="display:flex;justify-content:center;margin-top:20px;margin-bottom:20px;">
  <%= link_to "Create Ticket", new_project_ticket_path(@project.id), class:"btn text-center" %>
  </div>
  <!-- MODAL FORM  -->
  <div class="modal fade" id="formModal" tabindex="-1" aria-labelledby="formModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="formModalLabel">New Task</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <%= simple_form_for [@project,@new_task] do |f| %>
            <%= f.input :title %>
            <%= f.input :description, :as => :text, :input_html => { 'rows' => 5, 'cols' => 10 } %>
            <%= f.input :priority, as: :numeric %>
            <%= f.input :status, collection: ["To-Do", "Unassigned", "Completed", "In progress", "Next Meeting" ] %>
            <%= f.input :project_id, :as => :hidden, :input_html => { :value => @project.id }%>
            <%= f.input :user_id, :as => :hidden, :input_html => { :value => current_user.id }%>
            <%= button_to "Create Task", project_task_create_path(@project)%>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <!-- MODAL FORM  -->

  <!-- MODAL TASK  -->
  <div class="modal fade" id="task1Modal" tabindex="-1" aria-labelledby="task1ModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="task1ModalLabel">Task 1</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <h1>Information about the task</h1>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Send message</button>
        </div>
      </div>
    </div>
  </div>
  <!-- MODAL TASK  -->
</div>
